# User Profile Microservice

[![FastAPI](https://img.shields.io/badge/FastAPI-0.115.12-green?logo=fastapi)](https://fastapi.tiangolo.com/)
[![PostgreSQL/PostGIS](https://img.shields.io/badge/PostGIS-16--3.5-blue?logo=postgresql)](https://postgis.net/)
[![Redis](https://img.shields.io/badge/Redis-5.2.1-red?logo=redis)](https://redis.io/)
[![Docker Compose](https://img.shields.io/badge/Docker--Compose-3.9-blue?logo=docker)](https://docs.docker.com/compose/)
[![Python](https://img.shields.io/badge/Python->=3.10-blue?logo=python)](https://www.python.org/)
[![SQLAlchemy](https://img.shields.io/badge/SQLAlchemy-2.0.40-red?logo=sqlalchemy)](https://www.sqlalchemy.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-blue?logo=postgresql)](https://www.postgresql.org/)
[![Docker](https://img.shields.io/badge/Docker-24.0.7-blue?logo=docker)](https://www.docker.com/)
[![Pydantic](https://img.shields.io/badge/Pydantic-2.8.1-green?logo=pydantic)](https://docs.pydantic.dev/)
[![ruff](https://img.shields.io/badge/ruff-0.12.2-yellow?logo=python)](https://docs.astral.sh/ruff/)
[![Prometheus](https://img.shields.io/badge/Prometheus-2.51.2-orange?logo=prometheus)](https://prometheus.io/)
[![Grafana](https://img.shields.io/badge/Grafana-10.4.2-orange?logo=grafana)](https://grafana.com/)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
–°–µ—Ä–≤–∏—Å –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ FastAPI, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PostGIS –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
–≥–µ–æ–¥–∞–Ω–Ω—ã—Ö –∏ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.



---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤–æ–∑—Ä–∞—Å—Ç–∞ 18+)
- –ü–æ–∏—Å–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ —Ä–∞–¥–∏—É—Å—É –∏ –≤–æ–∑—Ä–∞—Å—Ç—É (–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ PostGIS)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –≤ Redis (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î –∏ –∫—ç—à–µ–º
- –î–æ–∫–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Alembic
- C–±–æ—Ä, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ Prometheus, Grafana

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.12** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **FastAPI** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π web-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (async)
- **Alembic** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º—ã –ë–î
- **PostgreSQL + PostGIS** ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö
- **Redis** ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø)
- **Docker, docker-compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **Poetry** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –ø–∞–∫–µ—Ç–∞–º–∏
- **Pydantic** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **ruff** ‚Äî –±—ã—Å—Ç—Ä—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–∏–Ω—Ç–µ—Ä –¥–ª—è Python
- **Prometheus** ‚Äî —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
- **Grafana** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑
  Prometheus.

---

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–æ–∫
- **–°–µ—Ä–≤–∏—Å—ã**: –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**: —Ä–∞–±–æ—Ç–∞ —Å –ë–î —á–µ—Ä–µ–∑ SQLAlchemy
- **–ö—ç—à**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Redis
- **–ú–æ–¥–µ–ª–∏ –∏ —Å—Ö–µ–º—ã**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, Pydantic –∏ SQLAlchemy
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è**: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é FastAPI –≤ Grafana

![–ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é FastAPI –≤ Grafana]
(docs/grafana_dashboard_example.png)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Docker

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É —Å –ø—Ä–æ–µ–∫—Ç–æ–º –∏ —Å–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
mkdir user_profile_service
cd user_profile_service
git clone https://github.com/aquaracer/Fastapi-User-Profile-Microservice.git
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ .env

3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker-compose up --build
```

4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
docker exec -it user_profile_service bash
poetry run alembic upgrade head
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–¥—Ä–µ—Å–∞–º:

- API: `http://localhost:8000`
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

